<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script src="https://cdn.bootcss.com/redux/4.0.1/redux.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
<script>
// funcs.reduce((a, b) => (...args) => a(b(...args)))
// 其实就是func中的方法，倒着一个一个调用，前一个调用返回的结果作为后一个的参数，第一个方法的参数是...args；
var {compose} = Redux;
function add10(x){
    console.log(10)
    return x+10
}
function add20(x){
    console.log(20)
    return x+20
}
function add30(x){
    console.log(30)
    return x+30
};
var fn = compose(...[add10,add20,add30]);






// 自己实现的compose
// function compose1(){
//     var arr = [...arguments]
//     return arr.reduce(function(a,b){
//         return function(arg){
//             return a(b(arg))
//         }
//     })
// }
// var fn2 = compose1(...[add10,add20,add30]);
// console.log(fn2(1));

// 模拟中间件：

function add100(next){
    return function(x){
        return next(x)
    }
}
function add200(next){
    return function(x){
        return next(x)
    }
}
function add300(next){
    return function(x){
        return next(x)
    }
}
var fn11 = compose(...[add100,add200,add300]);
fn11(function(x){console.log(x)})(200)

</script>
</body>
</html>